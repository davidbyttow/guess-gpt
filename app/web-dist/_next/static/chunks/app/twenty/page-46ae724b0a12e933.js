(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[164],{470:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return j}});var s=t(9268),n=t(2103),o=t(7779),a=t(6006),i=t(6008),l=t(6462),d=t(4214);let c=d.Z.create({baseURL:"http://localhost:5001",timeout:18e4,headers:{"Content-Type":"application/json"}}),u=async e=>{let r=await c.post("/v1/chat",e);return r.data};var h=t(7668),g=t(6470);let x=e=>{let{messages:r}=e;return(0,s.jsx)(s.Fragment,{children:r.map((e,r)=>(0,s.jsxs)(n.k,{alignSelf:"flex-start",flexDirection:"column",children:[(0,s.jsx)(h.x,{fontSize:"sm",fontWeight:"user"===e.role?"bold":"medium",color:"user"===e.role?"whatsapp.500":"red.500",children:"user"===e.role?"Me":"Person"}),(0,s.jsx)(g.xu,{color:"gray.700",px:2,borderLeftWidth:2,borderLeftColor:"user"===e.role?"whatsapp.500":"red.500",alignContent:"user"===e.role?"flex-end":"flex-start",borderRadius:0,children:(0,s.jsx)(h.x,{wordBreak:"break-word",children:e.content})},r)]},r))})};var p=t(3734),f=t(5735),m=t(1747);let w=e=>{let{inputMessage:r,onInputChange:t,isLoading:n=!1,onSubmit:o,onKeyDown:a=e=>{},placeholder:i="",submitButtonText:l="Send"}=e;return(0,s.jsx)(g.xu,{p:2,borderWidth:1,borderRadius:"sm",boxShadow:"lg",backgroundColor:"white",width:"100%",children:(0,s.jsxs)(p.U,{children:[(0,s.jsx)(f.I,{p:0,placeholder:i,variant:"outline",size:"sm",borderWidth:0,borderRadius:0,isDisabled:n,value:r,onChange:t,onKeyDown:a,_focus:{boxShadow:"none"}}),(0,s.jsx)(m.z,{colorScheme:"whatsapp",size:"sm",type:"submit",borderRadius:2,onClick:o,isDisabled:n,isLoading:n,children:l})]})})},b=e=>{let{messages:r,setMessages:t}=e,[n,i]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),h=e=>{t(r=>[...r,e])},g=e=>{i(e.target.value)},p=async e=>{"Enter"===e.key&&f()},f=async()=>{if(""===n.trim()||d)return;let e=n.trim();i(""),await m(e)},m=async e=>{t([...r,{id:(0,l.Z)(),role:"user",content:e}]);try{c(!0);let t=await u({messages:[...r,{id:(0,l.Z)(),role:"user",content:e}]}),s=t.messages.filter(e=>"assistant"===e.role&&!r.some(r=>r.id===e.id));s.forEach(e=>h(e))}catch(e){console.error("Error in handling conversation: ",e),console.error("Error details: ",e.response.data),h({id:(0,l.Z)(),role:"assistant",content:"Sorry, something went wrong. Please try again later."})}finally{c(!1)}};return(0,s.jsxs)(o.g,{spacing:3,width:"80%",maxWidth:800,overflowY:"auto",children:[(0,s.jsx)(x,{messages:r}),(0,s.jsx)(w,{inputMessage:n,isLoading:d,onInputChange:g,onKeyDown:p,onSubmit:f,placeholder:"Ask a yes/no question or guess who I am..."})]})};function j(){(0,i.useRouter)();let[e,r]=(0,a.useState)([]);return(0,s.jsx)(n.k,{height:"100vh",width:"100%",justifyContent:"center",alignItems:"center",children:(0,s.jsx)(o.g,{spacing:4,width:"80%",children:(0,s.jsx)(b,{messages:e,setMessages:r})})})}},3952:function(e,r,t){Promise.resolve().then(t.bind(t,470))}},function(e){e.O(0,[459,956,222,667,961,744],function(){return e(e.s=3952)}),_N_E=e.O()}]);